<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Trang chủ - Dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Link tới file CSS chuẩn (đã bao gồm style cho box-index) -->
    <link rel="stylesheet" th:href="@{/css/style.css}">
</head>
<body>

<!-- 1. Sidebar -->
<div th:replace="~{sidebar :: sidebar}"></div>

<!-- 2. HEADER / TOP BAR (Đã sửa lỗi layout) -->
<div class_alias="box-index"
     th:fragment="header"
     class="box-index d-flex justify-content-between align-items-center px-4 py-3">

    <!-- Lời chào (Tự động ở bên trái) -->
    <h5>Xin chào,
        <span th:text="${user.name}" style="color: var(--primary-color);" class="fw-bold">User</span>!
    </h5>

    <!-- Nút đăng xuất (Tự động ở bên phải) -->
    <form action="/logout" method="post" style="margin: 0;">
        <button class="btn btn-danger btn-sm" type="submit">Đăng xuất</button>
    </form>
</div>

<!-- 3. MAIN CONTENT (Nội dung Dashboard) -->
<div class="content">

    <!-- Hero Section (Đã sửa lỗi khoảng trắng) -->
    <div class="p-5 mb-4 bg-white rounded-3 shadow-sm border-start border-5 border-success">
        <div class="container-fluid"> <!-- Đã xóa py-2 thừa -->
            <h1 class="display-6 fw-bold text-success mb-2 ms-0">Hôm nay bạn muốn làm gì?</h1>
            <p class="col-md-8 fs-5 text-muted mb-4">Quản lý công việc, theo dõi dự án và hoàn thành mục tiêu hiệu quả cùng To Do Web.</p>
            <button class="btn btn-primary btn-lg" type="button"
                    onclick="window.location.href='/projects'">
                Xem dự án của tôi
            </button>
        </div>
    </div>

    <!-- Stats Cards -->
    <div class="row align-items-md-stretch">
        <div class="col-md-4 mb-4">
            <div class="h-100 p-4 text-white bg-success rounded-3 shadow-sm"
                 style="background: linear-gradient(135deg, #198754 0%, #2ea36c 100%);">
                <h2>Hôm nay</h2>
                <p>Kiểm tra các công việc cần hoàn thành trong ngày hôm nay.</p>
                <a th:href="@{/tasks/today}" class="btn btn-outline-light">Xem ngay</a>
            </div>
        </div>
        <div class="col-md-4 mb-4">
            <div class="h-100 p-4 bg-white border rounded-3 shadow-sm">
                <h2 class="text-success">Sắp tới</h2>
                <p class="text-muted">Lên kế hoạch cho các công việc trong tương lai gần.</p>
                <a th:href="@{/tasks/upcoming}" class="btn btn-outline-success">Xem lịch trình</a>
            </div>
        </div>
        <div class="col-md-4 mb-4">
            <div class="h-100 p-4 bg-white border rounded-3 shadow-sm">
                <h2 class="text-primary" style="color: #0d6efd !important;">Thống kê</h2>
                <p class="text-muted">Xem biểu đồ tiến độ và hiệu suất làm việc của bạn.</p>
                <a th:href="@{/report}" class="btn btn-outline-primary">Xem báo cáo</a>
            </div>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
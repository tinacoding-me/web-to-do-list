<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Sidebar Fragment</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
</head>
<body>
<div class="sidebar" th:fragment="sidebar">
    <h2 class="d-flex align-items-center justify-content-center gap-2">
        <i class="bi bi-check2-square"></i> TO DO WEB
    </h2>

    <a th:href="@{/}" class="sidebar-link">
        <i class="bi bi-house-door-fill me-2"></i> Trang chủ
    </a>

    <a th:href="@{/projects}" class="sidebar-link">
        <i class="bi bi-folder-fill me-2"></i> Quản lý dự án
    </a>

    <hr style="border-top: 1px solid rgba(255,255,255,0.2); width: 85%; margin: 15px auto;">

    <a th:href="@{/tasks/today}" class="sidebar-link">
        <i class="bi bi-calendar-check-fill me-2"></i> Hôm nay
    </a>

    <a th:href="@{/tasks/upcoming}" class="sidebar-link">
        <i class="bi bi-calendar-event-fill me-2"></i> Sắp tới
    </a>

    <a th:href="@{/report}" class="sidebar-link">
        <i class="bi bi-bar-chart-line-fill me-2"></i> Báo cáo
    </a>

    <hr style="border-top: 1px solid rgba(255,255,255,0.2); width: 85%; margin: 15px auto;">

    <a th:href="@{/user/profile}" class="sidebar-link">
        <i class="bi bi-person-circle me-2"></i> Tài khoản
    </a>

    <script>
        document.addEventListener("DOMContentLoaded", function() {
            const currentPath = window.location.pathname;
            const links = document.querySelectorAll('.sidebar-link');

            links.forEach(link => {
                const href = link.getAttribute('href');

                if (href === '/' && currentPath === '/') {
                    link.classList.add('active');
                }
                else if (href !== '/' && currentPath.startsWith(href)) {
                    link.classList.add('active');
                }
            });
        });
    </script>
</div>
</body>
</html>